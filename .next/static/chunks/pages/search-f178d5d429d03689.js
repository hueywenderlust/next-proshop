(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{2774:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return l(9391)}])},1116:function(e,s,l){"use strict";l.d(s,{Z:function(){return g}});var n=l(5893),t=l(3299),r=l(9008),a=l.n(r),i=l(1664),c=l.n(i),o=l(1955),d=l(7294),u=l(2920),h=l(5746);l(1399);var m=l(2331);function x(e){let{href:s,children:l,...t}=e;return(0,n.jsx)(c(),{href:s,...t,children:l})}var j=l(1163),p=l(9633),f=l(7814),v=l(9417);function g(e){let{title:s,children:l}=e,{status:r,data:i}=(0,t.useSession)(),{state:g,dispatch:b}=(0,d.useContext)(m.y),{cart:N}=g,[w,y]=(0,d.useState)(0);(0,d.useEffect)(()=>{y(N.cartItems.reduce((e,s)=>e+s.quantity,0))},[N.cartItems]);let k=()=>{o.Z.remove("cart"),b({type:"CART_RESET"}),(0,t.signOut)({callbackUrl:"/login"})},[_,C]=(0,d.useState)(""),A=(0,j.useRouter)(),E=e=>{e.preventDefault(),A.push("/search?query=".concat(_))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:s?s+" - Proshop":"Proshop"}),(0,n.jsx)("meta",{name:"description",content:"Ecommerce Website"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(u.Ix,{position:"bottom-center",limit:1}),(0,n.jsxs)("div",{className:"flex min-h-screen flex-col justify-between ",children:[(0,n.jsx)("header",{children:(0,n.jsxs)("nav",{className:"flex h-12 items-center px-4 justify-between shadow-md",children:[(0,n.jsx)(c(),{href:"/",className:"text-lg font-bold",children:"Proshop"}),(0,n.jsxs)("form",{onSubmit:E,className:"mx-auto  hidden  justify-center md:flex",children:[(0,n.jsx)("input",{onChange:e=>C(e.target.value),type:"text",className:"rounded-tr-none rounded-br-none p-1 text-sm   focus:ring-0",placeholder:"Search products"}),(0,n.jsx)("button",{className:"rounded rounded-tl-none rounded-bl-none bg-amber-300 p-1 text-sm dark:text-black",type:"submit",id:"button-addon2",children:(0,n.jsx)(p.Z,{className:"h-5 w-5"})})]}),(0,n.jsxs)("div",{className:"flex items-center z-10",children:[(0,n.jsxs)(c(),{href:"/cart",className:"p-2",children:[(0,n.jsx)(f.G,{icon:v.yYj,style:{color:"blue"}}),w>0&&(0,n.jsx)("span",{className:"ml-1 rounded-full bg-red-600 px-2 py-1 text-xs font-bold text-white",children:w})]}),"loading"===r?"Loading":(null==i?void 0:i.user)?(0,n.jsxs)(h.v,{as:"div",className:"relative inline-block",children:[(0,n.jsx)(h.v.Button,{className:"text-blue-600",children:i.user.name}),(0,n.jsxs)(h.v.Items,{className:"absolute right-0 w-56 origin-top-right bg-white  shadow-lg ",children:[(0,n.jsx)(h.v.Item,{children:(0,n.jsx)(x,{className:"dropdown-link",href:"/profile",children:"Profile"})}),(0,n.jsx)(h.v.Item,{children:(0,n.jsx)(x,{className:"dropdown-link",href:"/order-history",children:"Order History"})}),i.user.isAdmin&&(0,n.jsx)(h.v.Item,{children:(0,n.jsx)(x,{className:"dropdown-link",href:"/admin/dashboard",children:"Admin Dashboard"})}),(0,n.jsx)(h.v.Item,{children:(0,n.jsx)("a",{className:"dropdown-link",href:"#",onClick:k,children:"Logout"})})]})]}):(0,n.jsx)(c(),{href:"/login",className:"p-2",children:"Sign In"})]})]})}),(0,n.jsx)("main",{className:"container m-auto mt-4 px-4",children:l}),(0,n.jsx)("footer",{className:"flex h-10 justify-center items-center shadow-inner",children:(0,n.jsx)("p",{children:"Copyright \xa9 2023 Proshop"})})]})]})}},961:function(e,s,l){"use strict";l.d(s,{Z:function(){return a}});var n=l(5893),t=l(1664),r=l.n(t);function a(e){let{product:s,addToCartHandler:l}=e;return(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)(r(),{href:"/product/".concat(s.slug),children:(0,n.jsx)("img",{src:s.image,alt:s.name,className:"rounded shadow object-cover h-64 w-full"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center p-5",children:[(0,n.jsx)(r(),{href:"/product/".concat(s.slug),children:(0,n.jsx)("h2",{className:"text-lg",children:s.name})}),(0,n.jsx)("p",{className:"mb-2",children:s.brand}),(0,n.jsxs)("p",{children:["$",s.price]}),(0,n.jsx)("button",{className:"primary-button",type:"button",onClick:()=>l(s),children:"Add to cart"})]})]})}l(7294)},9391:function(e,s,l){"use strict";l.r(s),l.d(s,{__N_SSP:function(){return x},default:function(){return j}});var n=l(5893),t=l(6154),r=l(1163),a=l(7294),i=l(2920),c=l(1116),o=l(2331);let d=a.forwardRef(function({title:e,titleId:s,...l},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":s},l),e?a.createElement("title",{id:s},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))});var u=l(961);let h=[{name:"$1 to $50",value:"1-50"},{name:"$51 to $200",value:"51-200"},{name:"$201 to $1000",value:"201-1000"}],m=[1,2,3,4,5];var x=!0;function j(e){let s=(0,r.useRouter)(),{query:l="all",category:x="all",brand:j="all",price:p="all",rating:f="all",sort:v="featured",page:g=1}=s.query,{products:b,countProducts:N,categories:w,brands:y,pages:k}=e,_=e=>{let{page:l,category:n,brand:t,sort:r,min:a,max:i,searchQuery:c,price:o,rating:d}=e,{query:u}=s;l&&(u.page=l),c&&(u.searchQuery=c),r&&(u.sort=r),n&&(u.category=n),t&&(u.brand=t),o&&(u.price=o),d&&(u.rating=d),a&&(u.min,u.min),i&&(u.max,u.max),s.push({pathname:s.pathname,query:u})},C=e=>{_({category:e.target.value})},A=e=>{_({page:e})},E=e=>{_({brand:e.target.value})},P=e=>{_({sort:e.target.value})},I=e=>{_({price:e.target.value})},S=e=>{_({rating:e.target.value})},{state:R,dispatch:T}=(0,a.useContext)(o.y),Z=async e=>{let l=R.cart.cartItems.find(s=>s._id===e._id),n=l?l.quantity+1:1,{data:r}=await t.Z.get("/api/products/".concat(e._id));if(r.countInStock<n){i.Am.error("Sorry. Product is out of stock");return}T({type:"CART_ADD_ITEM",payload:{...e,quantity:n}}),s.push("/cart")};return(0,n.jsx)(c.Z,{title:"search",children:(0,n.jsxs)("div",{className:"grid md:grid-cols-4 md:gap-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"my-3",children:[(0,n.jsx)("h2",{children:"Categories"}),(0,n.jsxs)("select",{className:"w-full",value:x,onChange:C,children:[(0,n.jsx)("option",{value:"all",children:"All"}),w&&w.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("h2",{children:"Brands"}),(0,n.jsxs)("select",{className:"w-full",value:j,onChange:E,children:[(0,n.jsx)("option",{value:"all",children:"All"}),y&&y.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("h2",{children:"Prices"}),(0,n.jsxs)("select",{className:"w-full",value:p,onChange:I,children:[(0,n.jsx)("option",{value:"all",children:"All"}),h&&h.map(e=>(0,n.jsx)("option",{value:e.value,children:e.name},e.value))]})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("h2",{children:"Ratings"}),(0,n.jsxs)("select",{className:"w-full",value:f,onChange:S,children:[(0,n.jsx)("option",{value:"all",children:"All"}),m&&m.map(e=>(0,n.jsxs)("option",{value:e,children:[e," star",e>1&&"s"," & up"]},e))]})]})]}),(0,n.jsxs)("div",{className:"md:col-span-3",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center justify-between border-b-2 pb-2",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[0===b.length?"No":N," Results","all"!==l&&""!==l&&" : "+l,"all"!==x&&" : "+x,"all"!==j&&" : "+j,"all"!==p&&" : Price "+p,"all"!==f&&" : Rating "+f+" & up","\xa0","all"!==l&&""!==l||"all"!==x||"all"!==j||"all"!==f||"all"!==p?(0,n.jsx)("button",{onClick:()=>s.push("/search"),children:(0,n.jsx)(d,{className:"h-5 w-5"})}):null]}),(0,n.jsxs)("div",{children:["Sort by"," ",(0,n.jsxs)("select",{value:v,onChange:P,children:[(0,n.jsx)("option",{value:"featured",children:"Featured"}),(0,n.jsx)("option",{value:"lowest",children:"Price: Low to High"}),(0,n.jsx)("option",{value:"highest",children:"Price: High to Low"}),(0,n.jsx)("option",{value:"toprated",children:"Customer Reviews"}),(0,n.jsx)("option",{value:"newest",children:"Newest Arrivals"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3  ",children:b.map(e=>(0,n.jsx)(u.Z,{product:e,addToCartHandler:Z},e._id))}),(0,n.jsx)("ul",{className:"flex",children:b.length>0&&[...Array(k).keys()].map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{className:"default-button m-2 ".concat(g==e+1?"font-bold":""," "),onClick:()=>A(e+1),children:e+1})},e))})]})]})]})})}}},function(e){e.O(0,[976,583,154,774,888,179],function(){return e(e.s=2774)}),_N_E=e.O()}]);